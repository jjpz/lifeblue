const form=document.querySelector("form"),questions=Array.from(document.querySelectorAll(".question")),date=new Date,year=date.getFullYear();let month=date.getMonth()+1,day=date.getDate()+1;month<10&&(month="0"+month.toString()),day<10&&(day="0"+day.toString());const minDate=year+"-"+month+"-"+day,dateInput=document.querySelector('input[name="date"]');dateInput.setAttribute("min",minDate);const footerYear=document.querySelector(".footer-year");footerYear.innerHTML=year;const prevButton=document.querySelector("#navigation button.btn-prev"),nextButton=document.querySelector("#navigation button.btn-next"),submitButton=document.querySelector("#navigation button.btn-submit"),startOverButton=document.querySelector("button.btn-restart");startOverButton.classList.add("hidden");const progress=document.querySelector("#progress"),progressBar=progress.querySelector("#progress-bar"),progressValue=progress.querySelector("#progress-value");let counter,finalData,formData=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):[];0!==formData.length?(counter=formData.length,formData.forEach((e=>{for(let t in e)if("question"!==t&&"type"!==t)if("radio"===e.type){questions[e.question].querySelector(`input[name="frequency"][value="${e.frequency}"]`).checked=!0}else{questions[e.question].querySelector(".form-element").value=e[t]}}))):(counter=0,formData=[]),updateProgress=e=>{0===e?progress.classList.add("hidden"):progress.classList.remove("hidden");let t=(e-1)/10*100;progressBar.style.width=`${t}%`,progressValue.innerHTML=`${t}%`,progressBar.setAttribute("aria-valuenow",t)},showQuestion=e=>{if(questions[e].classList.add("active"),0===e?(prevButton.classList.add("hidden"),nextButton.textContent="Start"):(prevButton.classList.remove("hidden"),nextButton.textContent="Next"),e===questions.length-1){let e="";formData.forEach((t=>{for(let n in t)"question"!==n&&"type"!==n&&("radio"===t.type&&(e+=`\n                        <section class="summary-section radio-group">\n                            <div>${t.question}. Class frequency:</div>\n                            <div>\n                                <label for="single">\n                                    <input type="radio" id="single" name="frequency" value="single" ${"single"===t.frequency?"checked":""}>\n                                    <span>Single</span>\n                                </label>\n                            </div>\n                            <div>\n                                <label for="monthly">\n                                    <input type="radio" id="monthly" name="frequency" value="monthly" ${"monthly"===t.frequency?"checked":""}>\n                                    <span>Monthly Package</span>\n                                </label>\n                            </div>\n                        </section>\n                    `),"select"===t.type&&(e+=`\n                    <section class="summary-section select-group">\n                        <div>${t.question}. Class type:</div>\n                        <select id="class" name="class" class="form-element">\n                            <option value="">Please select an option</option>\n                            <option value="infant" ${"infant"===t.class?"selected":""}>Infant Yoga</option>\n                            <option value="baby" ${"baby"===t.class?"selected":""}>Baby Yoga</option>\n                            <option value="kids" ${"kids"===t.class?"selected":""}>Kids Yoga</option>\n                        </select>\n                    </section>\n                    `),"date"===t.type&&(e+=`\n                    <section class="summary-section">\n                        <div>${t.question}. Date:</div>\n                        <div><input type="date" id="date" name="date" min="${minDate}" value="${t[n]}" class="form-element"></div>\n                    </section>\n                    `),"email"===t.type&&(e+=`\n                    <section class="summary-section">\n                        <div>${t.question}. Email:</div>\n                        <div><input type="email" id="email" name="email" value="${t[n]}" class="form-element"></div>\n                    </section>\n                    `),"tel"===t.type&&(e+=`\n                    <section class="summary-section">\n                        <div>${t.question}. Phone:</div>\n                        <div><input type="tel" id="tel" name="tel" value="${t[n]}" class="form-element"></div>\n                    </section>\n                    `),"number"===t.type&&(e+=`\n                    <section class="summary-section">\n                        <div>${t.question}. Child's age:</div>\n                        <div><input type="number" id="age" name="age" min="1" max="12" value="${t[n]}" class="form-element"></div>\n                    </section>\n                    `),"text"===t.type&&(e+='<section class="summary-section">',"name"===n&&(e+=`<div>${t.question}. Child's name:</div>`),"parent"===n&&(e+=`<div>${t.question}. Parent's name:</div>`),"event"===n&&(e+=`<div>${t.question}. Event:</div>`),"info"===n&&(e+=`<div>${t.question}. Additional info:</div>`),e+=`<div><input type="text" id="${n}" name="${n}" value="${t[n]}" class="form-element"></div></section>\n                    `))})),document.getElementById("summary").innerHTML=`\n            <h2>Summary</h2>\n            ${e}\n        `,prevButton.classList.add("hidden"),nextButton.classList.add("hidden"),submitButton.classList.remove("hidden")}else nextButton.classList.remove("hidden"),submitButton.classList.add("hidden");updateProgress(e)},showQuestion(counter),prevQuestion=e=>{questions[e].classList.remove("active"),counter--,showQuestion(counter)},nextQuestion=e=>{if(!validateQuestion())return!1;questions[e].classList.remove("active"),counter++,showQuestion(counter)},prevButton.addEventListener("click",(()=>{prevQuestion(counter)})),nextButton.addEventListener("click",(()=>{nextQuestion(counter)})),startOverButton.addEventListener("click",(()=>{localStorage.clear(),location.reload()})),submitButton.addEventListener("click",(e=>{if(e.preventDefault(),!validateSummary())return!1;let t="";finalData.forEach((e=>{for(let n in e)"question"!==n&&"type"!==n&&("radio"===e.type&&(t+=`<section class="summary-section">${e.question}. Class frequency: ${e[n]}</section>`),"select"===e.type&&(t+=`<section class="summary-section">${e.question}. Class type: ${e[n]}</section>`),"date"===e.type&&(t+=`<section class="summary-section">${e.question}. Date: ${e[n]}</section>`),"email"===e.type&&(t+=`<section class="summary-section">${e.question}. Email: ${e[n]}</section>`),"tel"===e.type&&(t+=`<section class="summary-section">${e.question}. Phone: ${e[n]}</section>`),"number"===e.type&&(t+=`<section class="summary-section">${e.question}. Child's age: ${e[n]}</section>`),"text"===e.type&&("name"===n&&(t+=`<section class="summary-section">${e.question}. Child's name: ${e[n]}</section>`),"parent"===n&&(t+=`<section class="summary-section">${e.question}. Parent's name: ${e[n]}</section>`),"event"===n&&(t+=`<section class="summary-section">${e.question}. Event: ${e[n]}</section>`),"info"===n&&(t+=`<section class="summary-section">${e.question}. Additional info: ${e[n]}</section>`)))})),document.getElementById("summary").innerHTML=`\n        <h2>Your info has been submitted!</h2>\n        ${t}\n    `,prevButton.classList.add("hidden"),nextButton.classList.add("hidden"),submitButton.classList.add("hidden"),progress.classList.add("hidden"),startOverButton.classList.remove("hidden"),localStorage.clear()})),validateEmail=e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()),validateQuestion=()=>{let e=!0,t={};counter!==questions.length-1&&(t.question=counter);let n=questions[counter].querySelector(".form-element");if(questions[counter].classList.contains("radio-group")){t.type="radio";let n=document.querySelector('input[name="frequency"]:checked');null!=n?t.frequency=n.value:(e=!1,alert("Please select an option"))}else questions[counter].classList.contains("select-group")?(t.type="select",t.class=n.value,""===n.value?(e=!1,alert("Please select an option")):t.class=n.value):0!==counter&&(t.type=n.getAttribute("type"),""===n.value?(e=!1,n.classList.add("error"),alert("Please fill out this field")):"email"===t.type?validateEmail(n.value)?t.email=n.value:(e=!1,n.classList.add("error"),alert("Please enter a valid email")):(n.classList.remove("error"),t[n.name]=n.value));return e&&(formData[t.question]=t,localStorage.setItem("data",JSON.stringify(formData))),e},validateSummary=()=>{let e=!0,t=Array.from(questions[counter].querySelectorAll("section.summary-section"));return finalData=[],finalData.push({question:0}),t.forEach(((t,n)=>{if(t.classList.contains("radio-group")){let s=t.querySelector('input[name="frequency"]:checked');null!=s?finalData.push({question:n+1,type:"radio",frequency:s.value}):(e=!1,alert("Please select an option"))}else if(t.classList.contains("select-group")){let s=t.querySelector("select");""===s.value?(e=!1,alert("Please select an option")):finalData.push({question:n+1,type:"select",class:s.value})}else{let s=t.querySelector(".form-element");""===s.value?(e=!1,s.classList.add("error"),alert("Please fill out this field")):"email"===s.type?validateEmail(s.value)?finalData.push({question:n+1,type:s.getAttribute("type"),[s.name]:s.value}):(e=!1,s.classList.add("error"),alert("Please enter a valid email")):(s.classList.remove("error"),finalData.push({question:n+1,type:s.getAttribute("type"),[s.name]:s.value}))}})),e&&localStorage.setItem("data",JSON.stringify(finalData)),e};
//# sourceMappingURL=index.b87711bc.js.map
